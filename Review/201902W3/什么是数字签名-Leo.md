# 什么是数字签名

数字签名简介，作者： David Youd

原文：http://www.youdzone.com/signature.html

参考：阮一峰 http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html‘

简单来说，数字签名就是将消息通过 Hash 生成消息摘要（digest），再用私钥加密生成数字签名。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080901.png)

鲍勃有两把钥匙，其中一把叫公钥，另一把叫私钥。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080902.png)

鲍勃的公钥可以给任何人，但是只有他自己有私钥。密钥用于加密信息，这样只有某个人用合适的密钥解开它才能读取里面的信息。鲍勃任意一个密钥都可以加密信息，另一个密钥可以解密。

苏珊（下图中）可以用鲍勃的公钥加密数据，鲍勃再用私钥解密。鲍勃的任何一个伙伴都可以访问苏珊加密后的信息，但是没有鲍勃的私钥，数据是无效的。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080903.png)

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080904.png)

有了私钥和正确的软件，鲍勃可以在文档或数据上加上数字签名。数字签名是一个放在数据上的标记，用于标识鲍勃的唯一性，并且几乎无法伪造。签名确保对已签名的数据所做的任何更改都会被检测到。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080905.png)

要对一个文件进行签名，鲍勃的软件将通过一个名为「hashing」的过程，将数据压缩成几行，这几行代码称为消息摘要。（消息摘要一旦创建，不可能将它还原为原始数据）

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080906.png)

鲍勃的软件接下来用私钥对消息摘要进行加密，结果是生成一个数字签名。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080907.png)

最后，鲍勃的软件将数字签名追加到文档或数据中，所有数据都已被签名

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080908.png)

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080909.png)

鲍勃将文件传输给帕蒂。

首先，帕蒂用鲍勃的公钥将数字签名解密，将它还原成消息摘要。如果成功了，说明是鲍勃对文件做了签名，因为只有鲍勃有私钥。帕蒂再将文件数据通过 hash 形成消息摘要，与上一步的消息摘要对比，如果这两个消息摘要相同，说明被签名的数据没有被改动过。



复杂的情况出现了，道格（心怀不满的雇员）想要欺骗帕蒂，道格确保帕蒂接收到的信息和公钥似乎来自鲍勃，帕蒂不知道道格用鲍勃的名字创建了一个密钥对，他欺骗性地发送这个秘钥对给帕蒂，除了亲自收到鲍勃的公钥，帕蒂怎么能确认公钥是鲍勃的呢？

碰巧苏珊在公司的认证中心工作，苏珊用认证中心的私钥对鲍勃的公钥和一些相关信息加密生成数字证书。

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080910.png)

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080911.png)

现在鲍勃的同伴可以检查受信任的数字证书，确保公钥是属于鲍勃的。事实上，没有人接受不存在苏珊生成证书的签名。



![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080912.png)

![img](http://www.ruanyifeng.com/blogimg/asset/201108/bg2011080913.png)

假设鲍勃向帕蒂发送了一个签名的文档，为了验证文档上的签名，帕蒂首先用苏珊认证中心的公钥去验证鲍勃证书上的签名。成功解开加密证书证明是苏珊创建的，在证书解开后，帕蒂可以检查鲍勃再证书颁发机构的信誉是否良好，以及与鲍勃身份有关的所有证书信息是否被修改过。

帕蒂再从证书上拿取鲍勃的公钥去验证鲍勃的签名，如果鲍勃的公钥能解开签名，帕蒂可以确认这个签名是由鲍勃的私钥加密的，因为苏珊已经验证了匹配的公钥。当然，如果签名是有效的，说明道格没有修改过签名的内容。

尽管这些步骤看起来很复杂，但他们都是由帕蒂的软件来完成的，要验证签名，帕蒂只需要单击软件即可。

