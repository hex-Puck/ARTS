### 乔尔测试：写出好代码的12个步骤

**原文地址：[The Joel Test: 12 Steps to Better Code](https://www.joelonsoftware.com/2000/08/09/the-joel-test-12-steps-to-better-code/)**

这篇文章比较长，我只翻译了一部分。

-----

你听说过 [SEMA](http://www.sei.cmu.edu/sema/welcome.html) 吗？它用来衡量软件团队的好坏，是一个相当深奥的系统。不，等一下！不要打开那个链接，这会花费你大约六年的时间理解它。因此，我提出了自己的，非常不负责任的，草率的测试，以评估软件团队的质量。理解它的重要部分只要花三分钟，省下来的时间，你可以去医学院了。

> **乔尔测试**
>
> 1. 你使用源码控制吗？
> 2. 你能一步构建吗？
> 3. 你每天都构建吗？
> 4. 你有 debug 的数据库吗？
> 5. 在写新代码前，你会修复 bug 吗？
> 6. 你有最新的时间表吗？
> 7. 你有规格吗？
> 8. 程序员有安静的工作环境吗？
> 9. 你使用花钱能买到的最好的工具吗？
> 10. 你有测试人员吗？
> 11. 面试期间，你会让新候选人写代码吗？
> 12. 你有走廊可用性测试吗？

关于乔尔测试的巧妙之处在于，对每个问题都很容易得到肯定或否定。你不必弄清楚每天的代码行数或每个拐点的平均错误数。每个「是」答案给你的团队1分。关于乔尔测试的糟糕之处在于，你真的不应该用它来确保你的核电站软件是安全的。

得分12是完美的，11是可以容忍的，但是10或更低，你有严重的问题。 事实上，大多数软件组织都以2或3的分数运行，他们需要认真的帮助，因为像微软这样的公司全职运行12次。

当然，这些并不是决定成败的唯一因素：特别是，如果你有一个优秀的软件团队正在研究一个没人想要的产品，那么人们就不会想要它。 并且可以想象一个「枪手」团队没有做任何这些，却仍然能够做出改变世界的令人难以置信的软件。 但是，在其他条件相同的情况下，如果你能够做到这12件事，那么你将拥有一支能够始终如一地提供服务的纪律严明的团队。

#### 1. 你使用源码控制吗？

我使用过商业源代码控制软件包，使用的是免费的CVS，让我告诉你，CVS很好。 但是如果你没有源代码控制，你就会强调试图让程序员一起工作。 程序员无法知道其他人做了什么，错误无法轻易回滚。关于源代码控制系统的另一个优点是源代码本身在每个程序员的硬盘上检查 —— 我从来没有听说过使用源代码控制而丢失大量代码的项目。

#### 2. 你能一步构建吗？

我的意思是：从最新的源快照制作出货构建需要多少步骤？ 在优秀的团队中，您可以运行一个脚本，从头开始全面检查，重建每行代码，使EXE，各种版本，语言和#ifdef组合，创建安装包，并创建最终媒体 ——  CDROM布局，下载网站等等。

如果该过程需要超过一个步骤，则很容易出错。 当你接近发货时，你希望有一个非常快速的修复「最后」错误的循环，制作最终的EXE等。如果需要20个步骤来编译代码，运行安装构建器等，你会变得疯狂，你会犯愚蠢的错误。

出于这个原因，我工作的最后一家公司从WISE切换到InstallShield：我们要求安装过程能够在一夜之间从脚本自动运行，使用NT调度程序。因为WISE无法在一夜之间从调度程序运行，所以我们把它扔了出去。 （WISE的好心人向我保证，他们的最新版本确实支持夜间版本。）

#### 3. 你每天都构建吗？

当你使用源代码管理时，有时程序员会意外地检查破坏构建的内容。 例如，他们添加了新的源文件，一切都在他们的机器上编译好，但是他们忘了将源文件添加到代码库中。 因此，他们锁定机器，回家，忘却和快乐。 但是没有其他人可以工作，所以他们也必须回家，不开心。

打破构建是如此糟糕（并且如此常见），以至于它有助于进行日常构建，以确保不会忽视任何破损。 在大型团队中，确保立即解决破损的好方法是每天下午，例如午餐时间进行日常建设。 午餐前每个人都尽可能多地参与构建。 当他们回来时，构建完成。 如果它工作，太棒了！ 每个人都会查看最新版本的源代码并继续工作。 如果构建失败，则修复它，但每个人都可以继续使用预构建的，不间断的源代码版本。

在Excel团队中，我们有一个规则，即破坏构建的人，作为他们的“惩罚”，负责照看构建，直到其他人破坏它。 这是一个不打破构建的好动机，也是一个通过构建过程轮换每个人的好方法，这样每个人都可以学习它是如何工作的。

阅读更多我的关于日常构建的文章：[日常构建是你的朋友](https://www.joelonsoftware.com/articles/fog0000000023.html)