## 《操作系统之哲学原理》--系统调用

​	操作系统是一个系统程序，即为别的程序提供服务的程序。而操作系统的服务是通过**系统调用**来提供的。

​	在c语言中可用如下进行读盘操作：

`result= read（fd,buffer,nbytes）;`

​	系统调用按功能可划分为6大类：

- 进程控制类

- 文件管理类

- 设备管理类

- 内存管理类

- 信息维护类

- 通信类

   系统调用的3个阶段:

  - 参数准备阶段

  - 系统调用识别阶段

  - 系统调用执行阶段

    ​

​	在参数准备阶段，需要使用系统服务的程序将系统调用所需要的参数（fd,buffer, nbytes）压入栈中，然后调用read函数库，read函数将read系统调用的代码放在一个约定好的寄存器里面，通过trap（一种中断方式）将控制交给操作系统。	

​	在系统获得控制权后，将系统调用代码从寄存器中取出，与操作系统维护的一张系统调用表进行比较，获得read系统调用的程序体所在的内存地址，之后跳到该地址。之后执行系统调用函数，系统调用执行完后返回到用户程序。

**系统调用的参数传递**

​	read系统调用的参数被压入到栈中，即参数传递是通过栈来进行，但是这个效率并不是最高，效率最高的是将参数存放在指定的寄存器里面，由于寄存器的访问速度高于栈，所以这种方法参数传递的方法可以提高系统的执行效率，例如x64体系结构，前8个参数都是由寄存器传递，超过8个参数，后面的参数才通过栈传递。	